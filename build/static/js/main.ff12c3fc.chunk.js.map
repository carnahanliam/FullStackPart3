{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","components/Notification.js","services/person.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","nameText","value","nameValue","onChange","onNameChange","numberText","numberValue","onNumberChange","type","Filter","Persons","person","deletePerson","name","number","onClick","window","confirm","Notification","message","includes","className","baseUrl","axios","get","then","response","data","newPerson","post","id","delete","put","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setMessage","useEffect","console","log","personService","initialPersons","personsToShow","e","RegExp","test","event","target","preventDefault","some","personInput","find","p","changedPerson","returnedPerson","map","setTimeout","catch","error","concat","delName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff12c3fc.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        {props.nameText}\n        <input\n          value={props.nameValue}\n          onChange={props.onNameChange}\n        />\n      </div>\n      <div>\n      {props.numberText}\n        <input\n          value={props.numberValue}\n          onChange={props.onNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = (props) => {\n  return (\n    <p>\n      filter shown with\n      <input\n        value={props.value}\n        onChange={props.onChange}\n      />\n    </p>\n  )\n}\n\n\nexport default Filter","import React from \"react\";\n\nconst Persons = ({ person, deletePerson }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      {/* <button onClick={deletePerson}>Delete</button> */}\n      <button\n        onClick={() => {\n          if (window.confirm(`Delete ${person.name}?`)) deletePerson();\n        }}\n      >\n        Delete\n      </button>\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  } else if (message.includes(\"Error\")) {\n    return <div className=\"error\">{message}</div>;\n  }\n\n  return <div className=\"message\">{message}</div>;\n};\n\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\n  return request.then((response) => response.data);\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, del, update };\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/person\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    console.log(\"getAll effect\");\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    if (persons.some((e) => e.name === newName)) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const personInput = persons.find((p) => p.name === newName);\n        const changedPerson = { ...personInput, number: newNumber };\n        personService\n          .update(changedPerson.id, changedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((p) =>\n                p.id !== changedPerson.id ? p : returnedPerson\n              )\n            );\n            setMessage(`Phone number for ${returnedPerson.name} was updated`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            setMessage(\n              `Error: information for ${changedPerson.name} has already been removed from the server`\n            );\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n            setPersons(persons.filter((p) => p.id !== changedPerson.id));\n          });\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .create(personObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setMessage(`Error - ${error.response.data.error}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n          console.log(error.response.data.error);\n        });\n    }\n  };\n\n  const deletePerson = (id) => {\n    personService.del(id).then(() => {\n      const delName = persons.filter((p) => p.id === id)[0].name;\n      console.log(delName, \"was deleted\");\n    });\n    setPersons(persons.filter((p) => p.id !== id));\n  };\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value);\n    setFilter(event.target.value);\n  };\n\n  const personsToShow = persons.filter((e) => {\n    var re = new RegExp(filter, \"i\");\n    return re.test(e.name);\n  });\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter value={filter} onChange={handleFilterChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        onSubmit={addPerson}\n        nameText=\"name:\"\n        nameValue={newName}\n        onNameChange={handleNameChange}\n        numberText=\"number:\"\n        numberValue={newNumber}\n        onNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <div>\n        {personsToShow.map((person) => (\n          <Persons\n            key={person.name}\n            person={person}\n            deletePerson={() => deletePerson(person.id)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}